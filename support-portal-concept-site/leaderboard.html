<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Leaderboard</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6; /* Light gray background */
        }
        .metric-value {
            line-height: 1;
        }
    </style>
</head>
<body class="p-2 md:p-4 min-h-screen">

    <div id="app" class="max-w-6xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden">

        <!-- Header (Reduced padding) -->
        <header class="p-4 md:p-6 bg-gray-900 text-white flex justify-between items-center">
            <div>
                <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">LEADERBOARD</h1>
                <p class="text-gray-400 mt-1 text-sm md:text-base">October, 2025 Performance Review</p>
            </div>
            <div class="text-right text-sm text-gray-400 hidden sm:block">
                <p>Date: 10/25/2025</p>
                <p>Time: 12:30 PM</p>
            </div>
        </header>

        <!-- Global Metrics Summary (Reduced padding and adjusted value sizes in JS) -->
        <section id="summary" class="grid grid-cols-2 lg:grid-cols-4 gap-4 p-4 md:p-6 border-b border-gray-100">
            <!-- Metrics will be rendered here by JS -->
        </section>

        <!-- Leaderboard List Header (Slightly reduced padding) -->
        <div class="hidden md:grid grid-cols-12 gap-4 p-3 text-xs font-semibold uppercase tracking-wider text-gray-500 bg-gray-50 border-b border-gray-200">
            <div class="col-span-1 text-center">Rank</div>
            <div class="col-span-4">Agent Name</div>
            <div class="col-span-2 text-right">Resolutions</div>
            <div class="col-span-3 text-center">NPS Breakdown</div>
            <div class="col-span-1 text-right">NPS %</div>
            <div class="col-span-1 text-right">Ratio</div>
        </div>

        <!-- Leaderboard List -->
        <section id="leaderboard-list">
            <!-- List items will be rendered here by JS -->
        </section>

    </div>

    <script>
        // Data structure based on the provided image
        const AGENT_DATA = [
            { id: 1, name: "Mohamed Arafath", resolutions: 144, promoter: 33, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 22.9 },
            { id: 2, name: "Haritha Migara", resolutions: 120, promoter: 28, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 23.3 },
            { id: 3, name: "Vihanga Jayasekara", resolutions: 110, promoter: 22, passive: 1, detractor: 0, nps_percent: 95.7, nps_ratio: 20.9 },
            { id: 4, name: "Sundarasen Sridaran", resolutions: 109, promoter: 41, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 37.6 },
            { id: 5, name: "Ibrahim Musthafa", resolutions: 108, promoter: 45, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 41.7 },
            { id: 6, name: "Ahamed Thowfeek", resolutions: 42, promoter: 19, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 45.2 },
            { id: 7, name: "Rizvi Rizmy", resolutions: 20, promoter: 4, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 20.0 },
            { id: 8, name: "Rajendran Sham", resolutions: 18, promoter: 6, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 33.3 },
            { id: 9, name: "Thanushyanthan Thamilthasan", resolutions: 9, promoter: 3, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 33.3 },
            { id: 10, name: "Ranuka Sankalpana", resolutions: 7, promoter: 3, passive: 0, detractor: 0, nps_percent: 100.0, nps_ratio: 42.9 },
        ];

        // Global metrics based on the image summary
        const GLOBAL_METRICS = {
            resolutions: 688,
            nps_responses: 205,
            nps_promoter: 204,
            nps_passive: 1,
            nps_detractor: 0,
            nps_percent: 99.5,
            nps_ratio: 29.8
        };

        const listContainer = document.getElementById('leaderboard-list');
        const summaryContainer = document.getElementById('summary');

        /**
         * Generates the NPS breakdown HTML for a given agent.
         * @param {Object} agent - The agent data object.
         * @returns {string} HTML string for the NPS breakdown.
         */
        function getNPSBreakdownHTML(agent) {
            return `
                <div class="flex items-center space-x-2 justify-center md:justify-start">
                    <!-- Promoter (Green) -->
                    <div class="flex items-center text-green-600 font-medium">
                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"/></svg>
                        <span class="text-sm">${agent.promoter}</span>
                    </div>
                    <!-- Passive (Yellow) -->
                    <div class="flex items-center text-amber-500 font-medium">
                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"/></svg>
                        <span class="text-sm">${agent.passive}</span>
                    </div>
                    <!-- Detractor (Red) -->
                    <div class="flex items-center text-red-600 font-medium">
                        <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"/></svg>
                        <span class="text-sm">${agent.detractor}</span>
                    </div>
                </div>
            `;
        }

        /**
         * Renders the individual agent rows.
         */
        function renderLeaderboard() {
            let html = '';
            
            AGENT_DATA.forEach((agent, index) => {
                const rank = index + 1;
                const isTop3 = rank <= 3;
                
                // Determine styling for the row (Reduced padding from p-4 to p-3)
                let rowClasses = 'grid grid-cols-12 gap-4 p-3 items-center border-b border-gray-100 hover:bg-indigo-50 transition-colors duration-200';
                let rankClasses = 'text-center text-lg font-bold text-gray-500';
                let nameClasses = 'col-span-8 md:col-span-4 text-base font-semibold text-gray-800';
                // Reduced score size from text-xl to text-lg
                let scoreClasses = 'text-right text-lg font-extrabold';
                let npsPercentClasses = 'text-right font-bold text-base';
                let npsRatioClasses = 'text-right font-bold text-base';
                
                if (isTop3) {
                    rowClasses += ' bg-yellow-50/50'; // Light gold background for top 3
                    rankClasses = 'text-center text-lg font-extrabold text-indigo-600';
                    // Reduced top 3 score size from text-2xl to text-xl
                    scoreClasses = 'text-right text-xl font-extrabold text-indigo-600';
                }

                // Mobile View: Agent Card
                // Use flex column layout on mobile (col-span-12) and grid on desktop (grid-cols-12)
                
                html += `
                    <div class="${rowClasses}">
                        <!-- Rank (Visible on all sizes, but moved on mobile) -->
                        <div class="col-span-12 md:col-span-1 flex justify-start items-center md:block">
                            <span class="md:hidden text-xs font-semibold uppercase text-gray-500 mr-2">Rank: </span>
                            <div class="${rankClasses}">${rank}</div>
                        </div>

                        <!-- Agent Name -->
                        <div class="col-span-12 md:col-span-4">
                            <div class="${nameClasses}">${agent.name}</div>
                        </div>

                        <!-- Resolutions (Mobile & Desktop) -->
                        <div class="col-span-4 md:col-span-2 flex justify-start items-center md:justify-end">
                            <span class="md:hidden text-xs font-semibold uppercase text-gray-500 mr-2">Resolutions: </span>
                            <div class="${scoreClasses} text-indigo-600">${agent.resolutions}</div>
                        </div>
                        
                        <!-- NPS Breakdown (Mobile & Desktop) -->
                        <div class="col-span-8 md:col-span-3 flex justify-start items-center md:justify-center">
                            <span class="md:hidden text-xs font-semibold uppercase text-gray-500 mr-2">NPS: </span>
                            ${getNPSBreakdownHTML(agent)}
                        </div>
                        
                        <!-- NPS % (Mobile & Desktop) -->
                        <div class="col-span-6 md:col-span-1 flex justify-start items-center md:justify-end">
                            <span class="md:hidden text-xs font-semibold uppercase text-gray-500 mr-2">NPS %: </span>
                            <div class="${npsPercentClasses} ${agent.nps_percent < 100 ? 'text-red-500' : 'text-green-600'}">${agent.nps_percent.toFixed(1)}%</div>
                        </div>
                        
                        <!-- NPS Ratio (Mobile & Desktop) -->
                        <div class="col-span-6 md:col-span-1 flex justify-start items-center md:justify-end">
                            <span class="md:hidden text-xs font-semibold uppercase text-gray-500 mr-2">Ratio: </span>
                            <div class="${npsRatioClasses} text-gray-600">${agent.nps_ratio.toFixed(1)}%</div>
                        </div>
                        
                    </div>
                `;
            });

            listContainer.innerHTML = html;
        }

        /**
         * Renders the global summary metrics.
         */
        function renderSummary() {
            const metrics = [
                {
                    label: "Total Resolutions",
                    value: GLOBAL_METRICS.resolutions,
                    unit: '',
                    color: 'text-indigo-600',
                    subtext: 'All agents combined'
                },
                {
                    label: "NPS Responses",
                    value: GLOBAL_METRICS.nps_responses,
                    unit: '',
                    color: 'text-gray-800',
                    breakdown: [
                        { count: GLOBAL_METRICS.nps_promoter, color: 'text-green-600', label: 'Promoters' },
                        { count: GLOBAL_METRICS.nps_passive, color: 'text-amber-500', label: 'Passives' },
                        { count: GLOBAL_METRICS.nps_detractor, color: 'text-red-600', label: 'Detractors' }
                    ]
                },
                {
                    label: "Overall NPS %",
                    value: GLOBAL_METRICS.nps_percent.toFixed(1),
                    unit: '%',
                    color: 'text-green-600',
                    subtext: 'High NPS indicates strong service.'
                },
                {
                    label: "NPS Ratio",
                    value: GLOBAL_METRICS.nps_ratio.toFixed(1),
                    unit: '%',
                    color: 'text-pink-600',
                    subtext: 'Responses per Resolution'
                }
            ];

            let html = metrics.map(metric => {
                let breakdownHtml = '';
                if (metric.breakdown) {
                    breakdownHtml = `
                        <div class="mt-2 flex space-x-3 text-sm font-medium">
                            ${metric.breakdown.map(b => `
                                <div class="flex items-center ${b.color}">
                                    <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20"><circle cx="10" cy="10" r="10"/></svg>
                                    <span>${b.count}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                } else if (metric.subtext) {
                    breakdownHtml = `<p class="mt-1 text-xs text-gray-500">${metric.subtext}</p>`;
                }
                
                return `
                    <div class="p-3 bg-gray-50 rounded-lg shadow-inner">
                        <p class="text-sm font-medium uppercase tracking-wider text-gray-500">${metric.label}</p>
                        <!-- Reduced font size from text-4xl to text-3xl for compactness -->
                        <h2 class="metric-value text-3xl font-extrabold ${metric.color} mt-2">
                            ${metric.value}<span class="text-xl">${metric.unit}</span>
                        </h2>
                        ${breakdownHtml}
                    </div>
                `;
            }).join('');

            summaryContainer.innerHTML = html;
        }

        // Initialize the dashboard
        document.addEventListener('DOMContentLoaded', () => {
            renderSummary();
            renderLeaderboard();
        });
    </script>
</body>
</html>
